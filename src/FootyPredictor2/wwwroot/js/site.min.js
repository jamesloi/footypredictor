function drawDonutChart(e,a,r,t){var s=Morris.Donut({element:e,data:[{value:a.toFixed(2),label:r},{value:(100-a).toFixed(2),label:t}],backgroundColor:"#fff",labelColor:"#333333",colors:["#FF0000","#5CBFFD"],formatter:function(e){return e+"%"}});s.select(0)}window.common=function(){function e(e){var a,r,t,s,n,o,d,i={};if(null===e)return i;a=e.split("&");for(var l=0;l<a.length;l++)r=a[l],t=r.indexOf("="),-1===t?(s=r,n=null):(s=r.substr(0,t),n=r.substr(t+1)),o=decodeURIComponent(s),d=decodeURIComponent(n),i[o]=d;return i}var a={};return a.getFragment=function(){return 0===window.location.hash.indexOf("#")?e(window.location.hash.substr(1)):{}},a}(),angular.module("app",["ngSanitize","ui.select","ui.grid"]),angular.module("app").controller("SelectCtrl",function(e,a,r,t){var s=[];e.gridOptionsFixtureList={},e.gridOptionsFixtureList.data="fixturesData",e.gridOptionsFixtureList.enableColumnResizing=!0,e.gridOptionsFixtureList.enableFiltering=!0,e.gridOptionsFixtureList.enableGridMenu=!0,e.gridOptionsFixtureList.fastWatch=!0,e.gridOptionsFixtureList.enableHorizontalScrollbar=r.scrollbars.NEVER,e.gridOptionsFixtureList.columnDefs=[{name:"day",field:"date",cellFilter:'date:"d EEE"',width:60,type:"date"},{name:"month",field:"date",cellFilter:'date:"MMMM"',width:90,type:"date"},{name:"year",field:"date",cellFilter:'date:"yyyy"',width:60,type:"date"},{name:"time",field:"date",cellFilter:'date:"h:mm a"',width:80,type:"date"},{name:"home",field:"homeTeamName",width:190,cellTemplate:'<div><img width="20px" height="20px" ng-src="{{row.entity.crestHomeURI}}" lazy-src>&nbsp;&nbsp;{{row.entity.homeTeamName}}</div>'},{name:"Away",field:"awayTeamName",width:190,cellTemplate:'<div><img width="20px" height="20px" ng-src="{{row.entity.crestAwayURI}}" lazy-src>&nbsp;&nbsp;{{row.entity.awayTeamName}}</div>'},{name:"score",field:"score",width:70},{name:"result",field:"result",width:90}],e.gridOptionsLeague={},e.gridOptionsLeague.data="leagueData",e.gridOptionsLeague.enableColumnResizing=!0,e.gridOptionsLeague.enableFiltering=!0,e.gridOptionsLeague.enableGridMenu=!0,e.gridOptionsLeague.fastWatch=!0,e.gridOptionsLeague.enableHorizontalScrollbar=r.scrollbars.NEVER,e.gridOptionsLeague.columnDefs=[{name:"pos",field:"position",width:60},{name:"team",field:"crestURI",width:200,cellTemplate:'<div><img width="20px" height="20px" ng-src="{{row.entity.crestURI}}" alt="" lazy-src>&nbsp;&nbsp;{{row.entity.teamName}}</div>'},{name:"played",field:"played",width:80},{name:"points",field:"points",width:80,cellClass:"points"},{name:"goals",field:"goals",width:80},{name:"against",field:"against",width:80},{name:"diff",field:"difference",width:80},{name:"wins (H)",field:"winsH",width:80,cellClass:"home"},{name:"draws (H)",field:"drawsH",width:80,cellClass:"home"},{name:"losses (H)",field:"lossesH",width:80,cellClass:"home"},{name:"wins (A)",field:"winsA",width:80,cellClass:"away"},{name:"draws (A)",field:"drawsA",width:80,cellClass:"away"},{name:"losses (A)",field:"lossesA",width:80,cellClass:"away"}],e.disabled=void 0,e.enable=function(){e.disabled=!1},e.disable=function(){e.disabled=!0},e.clear=function(){e.seasonSelected.selected=void 0,e.teamSelected.selected=void 0},e.seasonSelected={},e.season=[],$.ajax({headers:{"X-Auth-Token":t.apiKey},url:t.apiUrl+"soccerseasons",dataType:"json",type:"GET",success:function(a){$.each(a,function(a,r){-1===r.caption.indexOf("Champions")&&e.season.push({teamsUrl:r._links.teams.href,fixturesUrl:r._links.fixtures.href,leagueUrl:r._links.leagueTable.href,name:r.caption,numberOfTeams:r.numberOfTeams,numberOfGames:r.numberOfGames,lastUpdated:r.lastUpdated})}),e.season.sort(function(e,a){var r=e.name.toUpperCase(),t=a.name.toUpperCase();return t>r?-1:r>t?1:0})},error:function(e,a,r){var t=a+", "+r;console.log("Request Failed: "+t)}}),e.updateSeason=function(){"undefined"!=typeof e.seasonSelected.selected&&null!==e.seasonSelected.selected?(e.teamSelected={},e.team=[],s=[],$.ajax({headers:{"X-Auth-Token":t.apiKey},url:e.seasonSelected.selected.teamsUrl,dataType:"json",type:"GET",async:!1,success:function(a){$.each(a.teams,function(a,r){e.team.push({name:r.name,shortName:r.shortName,squadMarketValue:r.squadMarketValue,crestUrl:r.crestUrl}),s[r.name]=r.crestUrl}),e.team.sort(function(e,a){var r=e.name.toUpperCase(),t=a.name.toUpperCase();return t>r?-1:r>t?1:0})},error:function(e,a,r){var t=a+", "+r;console.log("Request Failed: "+t)}}),e.fixtureSelected={},e.fixturesData=[],$.ajax({headers:{"X-Auth-Token":t.apiKey},url:e.seasonSelected.selected.fixturesUrl,dataType:"json",type:"GET",async:!1,success:function(a){$.each(a.fixtures,function(a,r){var t="",n="";null!=r.result.goalsHomeTeam&&(t=r.result.goalsHomeTeam),t+=" : ",null!=r.result.goalsAwayTeam&&(t+=r.result.goalsAwayTeam),null==r.result.goalsHomeTeam&&null==r.result.goalsAwayTeam?n="Unplayed":(r.result.goalsHomeTeam>r.result.goalsAwayTeam&&(n="Home Win"),r.result.goalsHomeTeam<r.result.goalsAwayTeam&&(n="Away Win"),r.result.goalsHomeTeam===r.result.goalsAwayTeam&&(n="Draw")),e.fixturesData.push({date:r.date,matchday:r.matchday,homeTeamName:r.homeTeamName,awayTeamName:r.awayTeamName,score:t,result:n,crestHomeURI:s[r.homeTeamName],crestAwayURI:s[r.awayTeamName],goalsHome:r.result.goalsHomeTeam,goalsAway:r.result.goalsAwayTeam})}),$("#divFixturesList").fadeIn()},error:function(e,a,r){var t=a+", "+r;console.log("Request Failed: "+t),$("#divFixturesList").fadeOut()}}),e.leagueSelected={},e.leagueData=[],$.ajax({headers:{"X-Auth-Token":t.apiKey},url:e.seasonSelected.selected.leagueUrl,dataType:"json",type:"GET",success:function(a){$.each(a.standing,function(a,r){for(var t=$.grep(e.fixturesData,function(e){return e.homeTeamName===r.teamName||e.awayTeamName===r.teamName}),n=0,o=0,d=0;d<t.length;d++)"Unplayed"!==t[d].result&&(t[d].goalsHome+t[d].goalsAway>2.5?n++:o++);e.leagueData.push({position:r.position,teamName:r.teamName,crestURI:s[r.teamName],played:r.playedGames,points:r.points,goals:r.goals,against:r.goalsAgainst,difference:r.goalDifference,winsH:r.home.wins,drawsH:r.home.draws,lossesH:r.home.losses,winsA:r.away.wins,drawsA:r.away.draws,lossesA:r.away.losses,oversPercent:n/r.playedGames*100,undersPercent:o/r.playedGames*100,winPercent:(r.home.wins+r.away.wins)/r.playedGames*100,drawPercent:(r.home.draws+r.away.draws)/r.playedGames*100,lossPercent:(r.home.losses+r.away.losses)/r.playedGames*100})}),e.$apply();var r=e.leagueData.slice(0);r.sort(function(e,a){var r=e.winPercent,t=a.winPercent;return r>t?-1:t>r?1:0}),e.mostWins=r[0];var t=e.leagueData.slice(0);t.sort(function(e,a){var r=e.drawPercent,t=a.drawPercent;return r>t?-1:t>r?1:0}),e.mostDraw=t[0];var n=e.leagueData.slice(0);n.sort(function(e,a){var r=e.lossPercent,t=a.lossPercent;return r>t?-1:t>r?1:0}),e.mostLoss=n[0];var o=e.leagueData.slice(0);o.sort(function(e,a){var r=e.oversPercent,t=a.oversPercent;return r>t?-1:t>r?1:0}),e.mostOvers=o[0];var d=e.leagueData.slice(0);d.sort(function(e,a){var r=e.undersPercent,t=a.undersPercent;return r>t?-1:t>r?1:0}),e.mostUnders=d[0],$("#graphLeaderWin").empty(),$("#graphLeaderDraw").empty(),$("#graphLeaderLoss").empty(),$("#graphLeaderOver").empty(),$("#graphLeaderUnder").empty(),drawDonutChart("graphLeaderWin",e.leagueData[0].winPercent,"Won","Other"),drawDonutChart("graphLeaderDraw",e.leagueData[0].drawPercent,"Draw","Other"),drawDonutChart("graphLeaderLoss",e.leagueData[0].lossPercent,"Lost","Other"),drawDonutChart("graphLeaderOver",e.leagueData[0].oversPercent,"Over","Under"),drawDonutChart("graphLeaderUnder",e.leagueData[0].undersPercent,"Under","Over"),$("#graphWinsWin").empty(),$("#graphWinsDraw").empty(),$("#graphWinsLoss").empty(),$("#graphWinsOver").empty(),$("#graphWinsUnder").empty(),drawDonutChart("graphWinsWin",e.mostWins.winPercent,"Won","Other"),drawDonutChart("graphWinsDraw",e.mostWins.drawPercent,"Draw","Other"),drawDonutChart("graphWinsLoss",e.mostWins.lossPercent,"Lost","Other"),drawDonutChart("graphWinsOver",e.mostWins.oversPercent,"Over","Under"),drawDonutChart("graphWinsUnder",e.mostWins.undersPercent,"Under","Over"),$("#graphDrawWin").empty(),$("#graphDrawDraw").empty(),$("#graphDrawLoss").empty(),$("#graphDrawOver").empty(),$("#graphDrawUnder").empty(),drawDonutChart("graphDrawWin",e.mostDraw.winPercent,"Won","Other"),drawDonutChart("graphDrawDraw",e.mostDraw.drawPercent,"Draw","Other"),drawDonutChart("graphDrawLoss",e.mostDraw.lossPercent,"Lost","Other"),drawDonutChart("graphDrawOver",e.mostDraw.oversPercent,"Over","Under"),drawDonutChart("graphDrawUnder",e.mostDraw.undersPercent,"Under","Over"),$("#graphLossWin").empty(),$("#graphLossDraw").empty(),$("#graphLossLoss").empty(),$("#graphLossOver").empty(),$("#graphLossUnder").empty(),drawDonutChart("graphLossWin",e.mostLoss.winPercent,"Won","Other"),drawDonutChart("graphLossDraw",e.mostLoss.drawPercent,"Draw","Other"),drawDonutChart("graphLossLoss",e.mostLoss.lossPercent,"Lost","Other"),drawDonutChart("graphLossOver",e.mostLoss.oversPercent,"Over","Under"),drawDonutChart("graphLossUnder",e.mostLoss.undersPercent,"Under","Over"),$("#graphOversUnder").empty(),$("#graphOversOver").empty(),$("#graphOversLoss").empty(),$("#graphOversDraw").empty(),$("#graphOversWin").empty(),drawDonutChart("graphOversWin",e.mostOvers.winPercent,"Won","Other"),drawDonutChart("graphOversDraw",e.mostOvers.drawPercent,"Draw","Other"),drawDonutChart("graphOversLoss",e.mostOvers.lossPercent,"Lost","Other"),drawDonutChart("graphOversOver",e.mostOvers.oversPercent,"Over","Under"),drawDonutChart("graphOversUnder",e.mostOvers.undersPercent,"Under","Over"),$("#graphUndersUnder").empty(),$("#graphUndersOver").empty(),$("#graphUndersLoss").empty(),$("#graphUndersDraw").empty(),$("#graphUndersWin").empty(),drawDonutChart("graphUndersWin",e.mostUnders.winPercent,"Won","Other"),drawDonutChart("graphUndersDraw",e.mostUnders.drawPercent,"Draw","Other"),drawDonutChart("graphUndersLoss",e.mostUnders.lossPercent,"Lost","Other"),drawDonutChart("graphUndersOver",e.mostUnders.oversPercent,"Over","Under"),drawDonutChart("graphUndersUnder",e.mostUnders.undersPercent,"Under","Over"),$('[name="statsDiv"]').fadeIn(),$("#divLeague").fadeIn()},error:function(e,a,r){var t=a+", "+r;console.log("Request Failed: "+t),$("#divLeague").fadeOut()}}),$("#divTeamDetails").hide(),$("#divSelectTeams").fadeIn(),$('[name="divStats"]').fadeIn(),$("#divLeagueDetails").fadeIn(),$("img").error(function(){$(this).hide()})):($("#divSelectTeams").fadeOut(),$("#divFixturesList").fadeOut(),$('[name="divStats"]').fadeOut(),$("#divLeagueDetails").fadeOut())},e.updateTeam=function(){if("undefined"!=typeof e.teamSelected.selected&&null!==e.teamSelected.selected){$("#divLeagueDetails").hide(),$("#divTeamDetails").fadeIn(),$('[name="divTeamStats"]').fadeIn(),$("#graphTeamWin").empty(),$("#graphTeamDraw").empty(),$("#graphTeamLoss").empty(),$("#graphTeamOver").empty(),$("#graphTeamUnder").empty();var a=jQuery.grep(e.leagueData,function(a,r){return a.teamName===e.teamSelected.selected.name});drawDonutChart("graphTeamWin",a[0].winPercent,"Won","Other"),drawDonutChart("graphTeamDraw",a[0].drawPercent,"Draw","Other"),drawDonutChart("graphTeamLoss",a[0].lossPercent,"Lost","Other"),drawDonutChart("graphTeamOver",a[0].oversPercent,"Over","Under"),drawDonutChart("graphTeamUnder",a[0].undersPercent,"Under","Over"),$('[name="statsTeamDiv"]').fadeIn()}}}),angular.module("app").controller("MainCtrl",function(e){}),angular.module("app").filter("propsFilter",function(){return function(e,a){var r=[];return angular.isArray(e)?e.forEach(function(e){for(var t=!1,s=Object.keys(a),n=0;n<s.length;n++){var o=s[n],d=a[o].toLowerCase();if(-1!==e[o].toString().toLowerCase().indexOf(d)){t=!0;break}}t&&r.push(e)}):r=e,r}}),angular.module("app").factory("footballapi",function(){return{apiUrl:"http://api.football-data.org/v1/",apiKey:"2fd64d7a0fb743279f2dc634882dbc48"}});